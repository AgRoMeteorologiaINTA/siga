colnames(estaciones) <- gsub(" ", "_", colnames(estaciones))
estaciones
usethis::use_data(estaciones, overwrite = TRUE)
usethis::use_data(estaciones, overwrite = TRUE, internal = TRUE)
devtools::load_all(".")
estaciones
str(estaciones)
?tidyr::as_tibble-es
es?mutate
getOption("help_type")
html?dpyr::mutate
dpyr::mutate
html?dplyr::mutate
devtools::load_all(".")
?dummy
devtools::load_all(".")
?dummy
es?dummy
es?dummy
helptopi <- "women"
help(topi)
topi <- "women"
help(topi)
?dummy-es
?dummy2
devtools::load_all(".")
?dummy2
help("dummy-es")
?combo
?combo
devtools::load_all(".")
es?dummy
es?dummy
es?dummy2
?dummy
es?dummy
devtools::load_all(".")
es?dummy
utils::%?%
debugonce(utils::help)
es?lm
topic
devtools::load_all(".")
es?dummy
library(siga)
es?dummy
devtools::load_all(".")
?dummy-es
help("dummy-es")
es?dummy
es?dummy
devtools::load_all(".")
devtools::load_all(".")
es?dummy
es?dummy
library(siga)
library(siga)
es?dummy
library(siga)
es?dummy
?dummy
es?dummy
es?dummy
library(siga)
?dummy
library(siga)
devtools::load_all(".")
?dummy
?dummy
library(siga)
?dummy
?dummy
es?dummy()
es?dummy
es?dummy
library(siga)
?dummy
library(siga)
library(siga)
?dummy
es?dummy
library(siga)
remove.packages("dummy")
remove.packages("siga")
estaciones <- data.table::fread("data-raw/estaciones.csv")
colnames(estaciones) <- tolower(colnames(estaciones))
colnames(estaciones) <- gsub(" ", "_", colnames(estaciones))
estaciones
ggplot(estaciones, aes(longitud, latitud)) +
geom_point()
library(ggplot2)
ggplot(estaciones, aes(longitud, latitud)) +
geom_point()
estaciones
estaciones[longitud >= -40 | latitud >= -75]
estaciones[longitud >= -40 | latitud <= -75]
estaciones
library(siga)
?dummy
es?dummy
?dummy
debugonce(roxygen2::roxygenise)
devtools::document(roclets = c('rd', 'collate', 'namespace'))
roclet_process.roclet_rd
file <- "."
rox <- roxygen2::parse_package(file)
rox
file <- "."
rox <- roxygen2::parse_package(file)
View(rox)
rox <- roxygen2::parse_package(file)
rox
x1 <- c(6, 8, 10, 12, 14, 6, 10, 10, 8, 12, 16, 18, 16, 14, 12, 16, 14)
y1 <- c(4, 8, 6, 4, 6, 10, 8, 10, 12, 8, 6, 6, 10, 8, 12, 10, 14)
c1 <- cor(x1,y1)
n1 <- length(x1)
i1 <- rep("a", times=n1)
x2 <- c(x1, 18, 20, 20, 22, 24, 24)
y2 <- c(y1, 16, 14, 18, 18, 14, 16)
c2 <- cor(x2,y2)
n2 <- length(x2)
i2 <- c(i1, rep("b", times=n2-n1))
x3 <- c(x2, 28, 28, 30, 30)
y3 <- c(y2, 22, 24, 22, 24)
c3 <- cor(x3, y3)
n3 <- length(x3)
i3 <- c(i2, rep("c", times=n3-n2))
cors <- data.frame(r=c(c1, c2, c3))
gdata <- data.frame(x=c(x1, x2, x3), y=c(y1, y2, y3), inciso=c(rep("a", times=n1), rep("b", times=n2), rep("c", times=n3)), grupo=c(i1, i2, i3))
ggplot(data=gdata, aes(x=x, y=y))+geom_point(aes(shape=grupo), size=3)+geom_smooth(method="lm", se=F, color="black", aes(group=grupo))+
geom_smooth(method="lm", aes(color=inciso), se=F)+theme_elio_bw
suppressWarnings(suppressPackageStartupMessages(library(ggplot2)))
suppressWarnings(library(knitr))
suppressWarnings(library(reshape2))
theme_elio_bw <- theme_bw() +
theme(axis.ticks = element_blank(), strip.background=element_blank(),panel.grid.major.x=element_blank(), panel.grid=element_blank())
x1 <- c(6, 8, 10, 12, 14, 6, 10, 10, 8, 12, 16, 18, 16, 14, 12, 16, 14)
y1 <- c(4, 8, 6, 4, 6, 10, 8, 10, 12, 8, 6, 6, 10, 8, 12, 10, 14)
c1 <- cor(x1,y1)
n1 <- length(x1)
i1 <- rep("a", times=n1)
x2 <- c(x1, 18, 20, 20, 22, 24, 24)
y2 <- c(y1, 16, 14, 18, 18, 14, 16)
c2 <- cor(x2,y2)
n2 <- length(x2)
i2 <- c(i1, rep("b", times=n2-n1))
x3 <- c(x2, 28, 28, 30, 30)
y3 <- c(y2, 22, 24, 22, 24)
c3 <- cor(x3, y3)
n3 <- length(x3)
i3 <- c(i2, rep("c", times=n3-n2))
cors <- data.frame(r=c(c1, c2, c3))
gdata <- data.frame(x=c(x1, x2, x3), y=c(y1, y2, y3), inciso=c(rep("a", times=n1), rep("b", times=n2), rep("c", times=n3)), grupo=c(i1, i2, i3))
ggplot(data=gdata, aes(x=x, y=y))+geom_point(aes(shape=grupo), size=3)+geom_smooth(method="lm", se=F, color="black", aes(group=grupo))+
geom_smooth(method="lm", aes(color=inciso), se=F)+theme_elio_bw
x <- 1:40
y <- x^1.1
mod <- lm(y~x)
gdata <- data.frame(x=x, y=y, Residuo=resid(mod))
meltgdata <- melt(gdata, id.vars=c("x"), value.name="y")
ggplot(meltgdata, aes(x=x, y=y))+facet_grid(variable~., scales = "free")+geom_point()+geom_smooth(method="lm", se=F, color="black")+theme_elio_bw
D<- c(93,19,0,18,0,3,48,73,27,14,22,47,23,24,0,0)
RT<-c(3.7,22.8,21.3,19.3,20.8,22,13,14.6,24.6,22.4,21.5,17.4,22.1,13.7,18,25)
summary(lm(RT~D))$r.squared
ggplot(data.frame(D=D,RT=RT), aes(D,RT))+geom_point()+geom_smooth(method="lm")+theme_elio_bw
ggplot(data.frame(D=rank(D, ties.method = "average"), RT=rank(RT, ties.method = "average")), aes(D,RT))+geom_point()+geom_smooth(method="lm")
debugonce(roxygen2::roxygenise)
devtools::document(roclets = c('rd', 'collate', 'namespace'))
packages
devtools::load_all(".")
devtools::load_all(".")
?dyummy
?dummy
es?dummy
library(isga)
library(siga)
library(siga)
?dummy
es?dummy
es?dummy
library(siga)
?es?dummy
es?dummy
?dummy
library(siga)
es?dummy
dummy
library(siga)
es?dummy
library(siga)
library(siga)
es?dummmy
?dummy
es?dummy
library(siga)
es?dummy
es?dummy
?dummy
?dummy
devtools::load_all(".")
a <- siga_descargar(siga_estaciones()$id_interno[1:10])
a
archivos <- a
archivo <- a[1]
data.table::fread(archivo)
data <- readxl::read_xls(locations[i])
devtools::load_all(".")
a <- siga_descargar(siga_estaciones()$id_interno[1:10])
devtools::load_all(".")
devtools::load_all(".")
a <- siga_descargar(siga_estaciones()$id_interno[1:10])
data <- readxl::read_xls(locations[i])
data
colnames(data) <- tolower(data)
data <- readxl::read_xls(locations[i])
colnames(data) <- tolower(colnames(data))
data
data$fecha <- as.Date(data$fecha)
data
col_types <- c("date", rep(21, "numeric"), "character", "numeric", "character", rep(5, "numeric"))
col_types <- c("date", rep("numeric", 21), "character", "numeric", "character", rep("numeric", 5))
data <- readxl::read_xls(locations[i], col_types = col_types)
col_types <- c("date", rep("numeric", 21), "text", "numeric", "text", rep("numeric", 5))
data <- readxl::read_xls(locations[i], col_types = col_types)
warnings()
data
data <- readxl::read_xls(locations[i], col_types = col_types)
colnames(data) <- tolower(colnames(data))
data$fecha <- as.Date(data$fecha)
data <- readxl::read_xls(locations[i], col_types = col_types)
colnames(data) <- tolower(colnames(data))
data
data <- readxl::read_xls(locations[i], col_types = col_types)
data
data <- readxl::read_xls(locations[i]) #, col_types = col_types)
data
data$Fecha
str(data)
colnames(data) <- tolower(colnames(data))
data$fecha <- as.Date(data$fecha)
str(Data)
str(data)
data$fecha <- strftime(data$fecha, "%Y-%m-%d %H:%M:%S")
data
str(data)
data$fecha <- strftime(data$fecha, "%Y-%m-%d %H:%M:%S")
data
str(data)
strftime(data$fecha, "%Y-%m-%d %H:%M:%S")[1:4]
str(strftime(data$fecha, "%Y-%m-%d %H:%M:%S")[1:4])
strptime(data$fecha, "%Y-%m-%d %H:%M:%S")[1:3]
str(strptime(data$fecha, "%Y-%m-%d %H:%M:%S")[1:3])
data$fecha <- strptime(data$fecha, "%Y-%m-%d %H:%M:%S")
str(data)
col_types <- c("text", rep("numeric", 21), "text", "numeric", "text", rep("numeric", 5))
data <- readxl::read_xls(locations[i], col_types = col_types)
colnames(data) <- tolower(colnames(data))
data
data$fecha <- strptime(data$fecha, "%Y-%m-%d %H:%M:%S")
str(data)
data.table::fwrite(data, final_files[i])
data$fecha <- as.Date(strptime(data$fecha, "%Y-%m-%d %H:%M:%S"))
data <- readxl::read_xls(locations[i], col_types = col_types)
colnames(data) <- tolower(colnames(data))
data$fecha <- as.Date(strptime(data$fecha, "%Y-%m-%d %H:%M:%S"))
data.table::fwrite(data, final_files[i])
data
data <- readxl::read_xls(locations[i], col_types = col_types)
data.table::setDT(data)
colnames(data) <- tolower(colnames(data))
data$fecha <- strptime(data$fecha, "%Y-%m-%d %H:%M:%S")
data <- readxl::read_xls(locations[i], col_types = col_types)
colnames(data) <- tolower(colnames(data))
data$fecha <- as.Date(strptime(data$fecha, "%Y-%m-%d %H:%M:%S"))
data.table::fwrite(data, final_files[i])
data
devtools::load_all(".")
a <- siga_descargar(siga_estaciones()$id_interno[1:10])
devtools::load_all(".")
a <- siga_descargar(siga_estaciones()$id_interno[1:10])
devtools::load_all(".")
devtools::load_all(".")
a <- siga_descargar(siga_estaciones()$id_interno[1:10])
devtools::load_all(".")
a <- siga_descargar(siga_estaciones()$id_interno[1:10])
5/18
18/5
a
archivos <- siga_descargar(siga_estaciones()$id_interno[1:10])
archivo <- archivos[|]
archivo <- archivos[1]
data.table::fread(archivo)
str(.)
col_types <- c("Date", rep("numeric", 21), "character", "numeric", "character", rep("numeric", 5))
data.table::fread(archivo, colClasses =col_types )
str(.)
data.table::fread(archivo) %>% str()
str(data.table::fread(archivo) )
col_types <- c("IDate", rep("numeric", 21), "character", "numeric", "character", rep("numeric", 5))
data.table::fread(archivo, colClasses =col_types )
str(.)
archivos <- siga_descargar(siga_estaciones()$id_interno[1:3], TRUE)
archivos <- siga_descargar(siga_estaciones()$id_interno[1:3], forzar = TRUE)
archivo <- archivos[1]
data.table::fread(archivo, colClasses = col_types)
col_types <- c("IDate", rep("numeric", 21), "character", "numeric", "character", rep("numeric", 5))
data.table::fread(archivo, colClasses = col_types)
devtools::load_all(".")
archivos <- siga_descargar(siga_estaciones()$id_interno[1:3], forzar = TRUE)
devtools::load_all(".")
archivos <- siga_descargar(siga_estaciones()$id_interno[1:3], forzar = TRUE)
data.table::fread(archivo, colClasses = col_types)
col_types <- c("IDate", rep("numeric", 21), "character", "numeric", "character", rep("numeric", 5))
data.table::fread(archivo, colClasses = col_types)
col_types <- c("character", "IDate", rep("numeric", 21), "character", "numeric", "character", rep("numeric", 5))
data.table::fread(archivo, colClasses = col_types)
str(.)
data <- lapply(archivos, function(archivo) {
if (is.na(archivo)) {
return(NULL)
}
data.table::fread(archivo, colClasses = col_types)
})
data
data <- data.table::rbindlist(data)
data
library(ggplot2)
ggplot(data, aes(fecha, temperatura_abrigo_150cm)) +
geom_point()
ggplot(data, aes(fecha, temperatura_abrigo_150cm)) +
geom_point() +
facet_wrap(~id)
data("diamonds")
archivos <- siga_descargar(siga_estaciones()$id_interno[1:3], forzar = TRUE)
siga_leer(archivos)
length( c("character", "IDate", rep("numeric", 21),
"character", "numeric", "character", rep("numeric", 5)))
devtools::load_all(".")
v
siga_leer(archivos)
devtools::load_all(".")
archivos <- siga_descargar(siga_estaciones()$id_interno[1:3], forzar = TRUE)
download
locations[i]
siga_leer(archivos)
ggplot(siga_leer(archivos), aes(fecha, velocidad_viento_200cm_media)) +
geom_point() +
facet_wrap(~id)
library(magrittr)
siga_leer(archivos) %>%
.[, v := metR::Anomaly(velocidad_viento_200cm_media), by = .(id, yday(fecha))] %>%
ggplot(aes(fecha, v)) +
geom_point() +
facet_wrap(~id)
siga_leer(archivos) %>%
.[, v := metR::Anomaly(velocidad_viento_200cm_media), by = .(id, data.table::yday(fecha))] %>%
ggplot(aes(fecha, v)) +
geom_point() +
facet_wrap(~id)
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, v := metR::Anomaly(velocidad_viento_200cm_media), by = .(id, data.table::yday(fecha))] %>%
ggplot(aes(fecha, v)) +
geom_point() +
facet_wrap(~id)
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, v := metR::Anomaly(velocidad_viento_200cm_media), by = .(id, data.table::yday(fecha))] %>%
ggplot(aes(fecha, v)) +
geom_point() +
facet_wrap(~id) +
geom_smooth()
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, vm := mean(velocidad_viento_200cm_media, na.rm = TRUE), by = .(id, data.table::yday(fecha))] %>%
.[, vm := velocidad_viento_200cm_media/v] %>%
ggplot(aes(fecha, v)) +
geom_point() +
facet_wrap(~id) +
geom_smooth()
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, vm := mean(velocidad_viento_200cm_media, na.rm = TRUE), by = .(id, data.table::yday(fecha))] %>%
.[, v := velocidad_viento_200cm_media/vm] %>%
ggplot(aes(fecha, v)) +
geom_point() +
facet_wrap(~id) +
geom_smooth()
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, .(mean(velocidad_viento_200cm_media, na.rm = TRUE)), by = .(id, data.table::yday(fecha))] %>%
.[]
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, .(mean(velocidad_viento_200cm_media, na.rm = TRUE)), by = .(id, day = data.table::yday(fecha))] %>%
ggplot(aes(day, V1)) +
geom_line()
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, .(mean(velocidad_viento_200cm_media, na.rm = TRUE)), by = .(id, day = data.table::yday(fecha))] %>%
.[, w := metR::FilterWave(V1, 1:2)] %>%
ggplot(aes(day, V1)) +
geom_line() +
geom_line(aes(y = w))
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, .(mean(velocidad_viento_200cm_media, na.rm = TRUE)), by = .(id, day = data.table::yday(fecha))] %>%
.[, w := metR::FilterWave(V1, 0:2)] %>%
ggplot(aes(day, V1)) +
geom_line() +
geom_line(aes(y = w))
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, .(mean(velocidad_viento_200cm_media, na.rm = TRUE)), by = .(id, day = data.table::yday(fecha))] %>%
.[, w := metR::FilterWave(V1, 0:3)] %>%
ggplot(aes(day, V1)) +
geom_line() +
geom_line(aes(y = w))
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, .(mean(velocidad_viento_200cm_media, na.rm = TRUE)), by = .(id, day = data.table::yday(fecha))] %>%
.[, w := metR::FilterWave(V1, 0:5)] %>%
ggplot(aes(day, V1)) +
geom_line() +
geom_line(aes(y = w))
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, .(mean(velocidad_viento_200cm_media, na.rm = TRUE)), by = .(id, day = data.table::yday(fecha))] %>%
.[, w := metR::FilterWave(V1, 0:4)] %>%
ggplot(aes(day, V1)) +
geom_line() +
geom_line(aes(y = w))
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, .(mean(velocidad_viento_200cm_media, na.rm = TRUE)), by = .(id, day = data.table::yday(fecha))] %>%
.[, w := metR::FilterWave(V1, 0:3)] %>%
ggplot(aes(day, V1)) +
geom_line() +
geom_line(aes(y = w))
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, .(mean(velocidad_viento_200cm_media, na.rm = TRUE)), by = .(id, day = data.table::yday(fecha))] %>%
.[, w := metR::FilterWave(V1, 0:2)] %>%
ggplot(aes(day, V1)) +
geom_line() +
geom_line(aes(y = w))
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, .(mean(velocidad_viento_200cm_media, na.rm = TRUE)), by = .(id, day = data.table::yday(fecha))] %>%
.[, w := metR::FilterWave(V1, 0:2)] -> cycle
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, day := data.table::yday(fecha)] %>%
.[cycle, on = .Natural]
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, day := data.table::yday(fecha)] %>%
.[cycle, on = .NATURAL]
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, day := data.table::yday(fecha)] %>%
.[cycle, on = .NATURAL] %>%
.[, v := velocidad_viento_200cm_media/w] %>%
ggplot(aes(fecha, v)) +
geom_point() +
facet_wrap(~id) +
geom_smooth()
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, day := data.table::yday(fecha)] %>%
.[cycle, on = .NATURAL] %>%
.[, v1 := velocidad_viento_200cm_media/w] %>%
ggplot(aes(fecha, velocidad_viento_200cm_media)) +
geom_point() +
facet_wrap(~id) +
geom_smooth()
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[year(fecha) <= 2017] %>%
.[, .(mean(velocidad_viento_200cm_media, na.rm = TRUE)), by = .(id, day = data.table::yday(fecha))] %>%
.[, w := metR::FilterWave(V1, 0:2)] -> cycle
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[data.table::year(fecha) <= 2017] %>%
.[, .(mean(velocidad_viento_200cm_media, na.rm = TRUE)), by = .(id, day = data.table::yday(fecha))] %>%
.[, w := metR::FilterWave(V1, 0:2)] -> cycle
siga_leer(archivos) %>%
.[id == "A872923"] %>%
.[, day := data.table::yday(fecha)] %>%
.[cycle, on = .NATURAL] %>%
.[, v1 := velocidad_viento_200cm_media/w] %>%
ggplot(aes(fecha, velocidad_viento_200cm_media)) +
geom_point() +
facet_wrap(~id) +
geom_smooth()
estaciones_tabla
siga_estaciones()
siga_leer(archivos)
usethis::use_package("data.table")
usethis::use_package("readxl")
estaciones_tabla
estaciones_tabla
source('~/Documents/siga/data-raw/estaciones_tabla.R', echo=TRUE)
devtools::load_all(".")
devtools::load_all(".")
?siga_descargar
usethis::use_build_ignore("siga.Rproj")
library(siga)
library(siga)
data <- readxl::read_xls(locations[i], col_types = col_types)
breaks
paste0(breaks)
